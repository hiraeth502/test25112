<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ë‘ë”ì§€ ì¡ê¸° ê²Œì„</title>
  <style>
    /* 1. ìŠ¤íƒ€ì¼(CSS): ê²Œì„ì˜ ë””ìì¸ì„ ë‹´ë‹¹ */
    body {
      text-align: center;
      font-family: 'Jua', sans-serif; /* ê·€ì—¬ìš´ í°íŠ¸ê°€ ì—†ë‹¤ë©´ ê¸°ë³¸ í°íŠ¸ ì ìš©ë¨ */
      background-color: #ffeb3b;
      margin: 0;
      padding: 20px;
    }

    h1 {
      font-size: 50px;
      margin-bottom: 10px;
    }

    .score-board {
      font-size: 30px;
      margin-bottom: 20px;
    }

    button {
      padding: 10px 30px;
      font-size: 20px;
      cursor: pointer;
      background-color: #fff;
      border: 2px solid #333;
      border-radius: 10px;
    }

    /* ê²Œì„ íŒ (3x3 ê·¸ë¦¬ë“œ) */
    .game {
      width: 600px;
      height: 400px;
      display: flex;
      flex-wrap: wrap;
      margin: 0 auto;
    }

    .hole {
      flex: 1 0 33.33%; /* 3ì—´ ë°°ì¹˜ */
      overflow: hidden; /* ë‘ë”ì§€ê°€ êµ¬ë© ë°–ìœ¼ë¡œ ë„˜ì¹˜ì§€ ì•Šê²Œ ìˆ¨ê¹€ */
      position: relative;
    }

    /* í™ë”ë¯¸ ì´ë¯¸ì§€ (CSSë¡œ í‘œí˜„) */
    .hole:after {
      content: '';
      display: block;
      background: url('https://raw.githubusercontent.com/wesbos/JavaScript30/master/30%20-%20Whack%20A%20Mole/dirt.svg') bottom center no-repeat;
      background-size: contain;
      width: 100%;
      height: 70px;
      position: absolute;
      z-index: 2;
      bottom: -30px;
    }

    /* ë‘ë”ì§€ ì´ë¯¸ì§€ */
    .mole {
      background: url('https://raw.githubusercontent.com/wesbos/JavaScript30/master/30%20-%20Whack%20A%20Mole/mole.svg') bottom center no-repeat;
      background-size: 60%;
      position: absolute;
      top: 100%; /* ì²˜ìŒì— ìˆ¨ê²¨ë‘  */
      width: 100%;
      height: 100%;
      transition: all 0.4s;
      cursor: crosshair; /* ì¡°ì¤€ì  ì»¤ì„œ */
    }

    /* ë‘ë”ì§€ê°€ ì˜¬ë¼ì™”ì„ ë•Œ */
    .hole.up .mole {
      top: 0;
    }
  </style>
</head>
<body>

  <h1>ë‘ë”ì§€ ì¡ê¸°! ğŸ”¨</h1>
  <div class="score-board">
    ì ìˆ˜: <span class="score">0</span> <br>
    ë‚¨ì€ ì‹œê°„: <span class="time">10</span>ì´ˆ
  </div>
  <button onClick="startGame()">ê²Œì„ ì‹œì‘!</button>

  <div class="game">
    <div class="hole hole1"><div class="mole"></div></div>
    <div class="hole hole2"><div class="mole"></div></div>
    <div class="hole hole3"><div class="mole"></div></div>
    <div class="hole hole4"><div class="mole"></div></div>
    <div class="hole hole5"><div class="mole"></div></div>
    <div class="hole hole6"><div class="mole"></div></div>
  </div>

<script>
  /* 2. ìë°”ìŠ¤í¬ë¦½íŠ¸(JS): ê²Œì„ì˜ ë™ì‘ì„ ë‹´ë‹¹ */
  const holes = document.querySelectorAll('.hole');
  const scoreBoard = document.querySelector('.score');
  const timeBoard = document.querySelector('.time');
  const moles = document.querySelectorAll('.mole');
  
  let lastHole;
  let timeUp = false;
  let score = 0;
  let countdown;

  // ëœë¤í•œ ì‹œê°„ ìƒì„± (ë‘ë”ì§€ê°€ ì˜¬ë¼ì™€ ìˆëŠ” ì‹œê°„)
  function randomTime(min, max) {
    return Math.round(Math.random() * (max - min) + min);
  }

  // ëœë¤í•œ êµ¬ë© ì„ íƒ
  function randomHole(holes) {
    const idx = Math.floor(Math.random() * holes.length);
    const hole = holes[idx];
    if (hole === lastHole) {
      return randomHole(holes); // ê°™ì€ êµ¬ë©ì´ ë‚˜ì˜¤ë©´ ë‹¤ì‹œ ì¶”ì²¨
    }
    lastHole = hole;
    return hole;
  }

  // ë‘ë”ì§€ íŠ€ì–´ë‚˜ì˜¤ê²Œ í•˜ê¸°
  function peep() {
    const time = randomTime(200, 1000); // 0.2ì´ˆ ~ 1ì´ˆ ì‚¬ì´ ëœë¤
    const hole = randomHole(holes);
    hole.classList.add('up');

    setTimeout(() => {
      hole.classList.remove('up');
      if (!timeUp) peep(); // ê²Œì„ ì‹œê°„ì´ ì•ˆ ëë‚¬ìœ¼ë©´ ê³„ì† ë°˜ë³µ
    }, time);
  }

  // ê²Œì„ ì‹œì‘
  function startGame() {
    scoreBoard.textContent = 0;
    timeBoard.textContent = 10;
    score = 0;
    timeUp = false;
    
    // ê¸°ì¡´ íƒ€ì´ë¨¸ê°€ ìˆë‹¤ë©´ ì œê±°
    if(countdown) clearInterval(countdown);

    peep();
    
    // ì¹´ìš´íŠ¸ë‹¤ìš´ ë¡œì§
    let timeLeft = 10;
    countdown = setInterval(() => {
      timeLeft--;
      timeBoard.textContent = timeLeft;
      if (timeLeft <= 0) {
        clearInterval(countdown);
        timeUp = true;
        alert('ê²Œì„ ì¢…ë£Œ! ë‹¹ì‹ ì˜ ì ìˆ˜ëŠ”: ' + score + 'ì  ì…ë‹ˆë‹¤.');
      }
    }, 1000);
  }

  // ë‘ë”ì§€ë¥¼ ë•Œë ¸ì„ ë•Œ
  function bonk(e) {
    if(!e.isTrusted) return; // ìŠ¤í¬ë¦½íŠ¸ë¡œ í´ë¦­ ì¡°ì‘ ë°©ì§€
    score++;
    this.parentNode.classList.remove('up'); // ë§ìœ¼ë©´ ë°”ë¡œ ë“¤ì–´ê°
    scoreBoard.textContent = score;
  }

  moles.forEach(mole => mole.addEventListener('click', bonk));

</script>
</body>
</html>
